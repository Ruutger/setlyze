

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>setlyze.database — Database access &mdash; SETLyze v1.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="SETLyze v1.0 documentation" href="../index.html" />
    <link rel="up" title="SETLyze Standard Modules" href="../setlyze_modules.html" />
    <link rel="next" title="setlyze.gui — Graphical interfaces" href="gui.html" />
    <link rel="prev" title="setlyze.config — Configuration manager" href="config.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="gui.html" title="setlyze.gui — Graphical interfaces"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="config.html" title="setlyze.config — Configuration manager"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">SETLyze v1.0 documentation</a> &raquo;</li>
          <li><a href="../developer_guide.html" >SETLyze Developer Guide</a> &raquo;</li>
          <li><a href="../setlyze_modules.html" accesskey="U">SETLyze Standard Modules</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="setlyze-database-database-access">
<h1><a class="reference internal" href="#module-setlyze.database" title="setlyze.database"><tt class="xref py py-mod docutils literal"><span class="pre">setlyze.database</span></tt></a> &#8212; Database access<a class="headerlink" href="#setlyze-database-database-access" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Serrano Pereira</td>
</tr>
<tr class="field"><th class="field-name">Release:</th><td class="field-body">1.0</td>
</tr>
<tr class="field"><th class="field-name">Date:</th><td class="field-body">January 06, 2011</td>
</tr>
</tbody>
</table>
<div class="section" id="module-setlyze.database">
<span id="module-contents"></span><h2>Module Contents<a class="headerlink" href="#module-setlyze.database" title="Permalink to this headline">¶</a></h2>
<p>Facilitate access to the local SQLite database and the remote SETL
database.</p>
<p>The local SQLite database is created by <a class="reference internal" href="#setlyze.database.MakeLocalDB.create_new_db" title="setlyze.database.MakeLocalDB.create_new_db"><tt class="xref py py-meth docutils literal"><span class="pre">setlyze.database.MakeLocalDB.create_new_db()</span></tt></a>.
It is created using the SQLite Python module. This database is used
internally by SETLyze for local data storage and allows for the
execution of SQL queries. The database is a single file created in the
user&#8217;s home directory in a subfolder called <tt class="docutils literal"><span class="pre">.setlyze</span></tt>.</p>
<p>Here we refer to the PostgreSQL SETL database as the remote SETL
database.</p>
<dl class="class">
<dt id="setlyze.database.AccessDBGeneric">
<em class="property">class </em><tt class="descclassname">setlyze.database.</tt><tt class="descname">AccessDBGeneric</tt><a class="reference internal" href="../_modules/setlyze/database.html#AccessDBGeneric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.AccessDBGeneric" title="Permalink to this definition">¶</a></dt>
<dd><p>Super class for <a class="reference internal" href="#setlyze.database.AccessLocalDB" title="setlyze.database.AccessLocalDB"><tt class="xref py py-class docutils literal"><span class="pre">AccessLocalDB</span></tt></a> and <a class="reference internal" href="#setlyze.database.AccessRemoteDB" title="setlyze.database.AccessRemoteDB"><tt class="xref py py-class docutils literal"><span class="pre">AccessRemoteDB</span></tt></a>.</p>
<p>This class contains methods that are generic for both sub-classes.
It provides both sub classes with methods for data that is always
present in the local database.</p>
<dl class="method">
<dt id="setlyze.database.AccessDBGeneric.fill_plate_spot_totals_table">
<tt class="descname">fill_plate_spot_totals_table</tt><big>(</big><em>spots_table1</em>, <em>spots_table2=None</em><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#AccessDBGeneric.fill_plate_spot_totals_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.AccessDBGeneric.fill_plate_spot_totals_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill the <tt class="docutils literal"><span class="pre">plate_spot_totals</span></tt> table with the number of
positive spots for each plate.</p>
<p>The information is obtained from the tables <cite>spots_table1</cite> and
<cite>spots_table2</cite> (optional).</p>
<p>The <tt class="docutils literal"><span class="pre">plate_spot_totals</span></tt> table is used in several situations:</p>
<blockquote>
<ul class="simple">
<li>Calculating the expected distances, where the positive spot
number serves as a template for the random spots generator
(see <em class="xref std std-ref">~setlyze.std.get_random_for_plate</em>).</li>
<li>Significance calculators, where the tests are applied to
plates with a specific number of positive spots (see
<em class="xref std std-ref">get_distances_matching_spots_total</em>).</li>
</ul>
</blockquote>
<p>If just <cite>spots_table1</cite> is provided, only the column <tt class="docutils literal"><span class="pre">n_spots_a</span></tt>
is filled with positive spot numbers. If both <cite>spots_table1</cite> and
<cite>spots_table2</cite> are provided, <tt class="docutils literal"><span class="pre">n_spots_a</span></tt> is filled
from <cite>spots_table1</cite>, and <tt class="docutils literal"><span class="pre">n_spots_b</span></tt> filled from <cite>spots_table2</cite>.</p>
<p>Design Part: 1.73</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.AccessDBGeneric.get_database_info">
<tt class="descname">get_database_info</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#AccessDBGeneric.get_database_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.AccessDBGeneric.get_database_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Return info (creation date, data source) stored in the local
database file.</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.AccessDBGeneric.get_distances_matching_ratios">
<tt class="descname">get_distances_matching_ratios</tt><big>(</big><em>cursor</em>, <em>distance_table</em>, <em>ratios</em><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#AccessDBGeneric.get_distances_matching_ratios"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.AccessDBGeneric.get_distances_matching_ratios" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the spot distances from distance table <cite>distance_table</cite> where
positive spots numbers between species A and B have ratio
matching the list of ratios <cite>ratios</cite>.</p>
<p>The ratio A:B is considered the same as B:A.</p>
<p><cite>cursor</cite> must be a SQLite cursor object.</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.AccessDBGeneric.get_distances_matching_spots_total">
<tt class="descname">get_distances_matching_spots_total</tt><big>(</big><em>cursor</em>, <em>distance_table</em>, <em>spots_n</em><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#AccessDBGeneric.get_distances_matching_spots_total"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.AccessDBGeneric.get_distances_matching_spots_total" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the distances from distance table <cite>distance_table</cite> that
are from plates having <cite>spots_n</cite> positive spot numbers.</p>
<p><cite>cursor</cite> must be a SQLite cursor object.</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.AccessDBGeneric.get_locations">
<tt class="descname">get_locations</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#AccessDBGeneric.get_locations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.AccessDBGeneric.get_locations" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all locations from the local database.</p>
<p>Returns a list of tuples <tt class="docutils literal"><span class="pre">(loc_id,</span> <span class="pre">'loc_name')</span></tt>.</p>
<p>Design Part: 1.95</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.AccessDBGeneric.make_plates_unique">
<tt class="descname">make_plates_unique</tt><big>(</big><em>slot</em><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#AccessDBGeneric.make_plates_unique"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.AccessDBGeneric.make_plates_unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine the records with the same plate ID in a spots table.
The value for <cite>slot</cite> defines which spots table is used.
The possible values of <cite>slot</cite> are <tt class="docutils literal"><span class="pre">0</span></tt> for table
<tt class="docutils literal"><span class="pre">species_spots_1</span></tt> and <tt class="docutils literal"><span class="pre">1</span></tt> for <tt class="docutils literal"><span class="pre">species_spots_2</span></tt>.</p>
<p>We&#8217;re doing this so we can threat multiple species selected by
the user as a single species.</p>
<p>Design Part: 1.20</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.AccessDBGeneric.remove_single_spot_plates">
<tt class="descname">remove_single_spot_plates</tt><big>(</big><em>table</em><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#AccessDBGeneric.remove_single_spot_plates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.AccessDBGeneric.remove_single_spot_plates" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove records that have just one positive spot. Intra-specific
distance can’t be calculated for those.</p>
<p class="deprecated">
<span class="versionmodified">Deprecated since version 0.1: </span>Use of this function is discouraged. You can easily check for
a minimum number of spots in your functions. Also the function
<a class="reference internal" href="std.html#setlyze.std.get_spot_combinations_from_record" title="setlyze.std.get_spot_combinations_from_record"><tt class="xref py py-meth docutils literal"><span class="pre">get_spot_combinations_from_record()</span></tt></a> will
return an empty list if no combinations are possibe (e.g. the
record contains less than 2 positive spots).</p>
<p>Design Part: 1.21</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="setlyze.database.AccessLocalDB">
<em class="property">class </em><tt class="descclassname">setlyze.database.</tt><tt class="descname">AccessLocalDB</tt><a class="reference internal" href="../_modules/setlyze/database.html#AccessLocalDB"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.AccessLocalDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide standard methods for accessing data in the local
SQLite database. These methods are only used when the data source
is set to <tt class="docutils literal"><span class="pre">csv-msaccess</span></tt>.</p>
<p>Inherits from <a class="reference internal" href="#setlyze.database.AccessDBGeneric" title="setlyze.database.AccessDBGeneric"><tt class="xref py py-class docutils literal"><span class="pre">AccessDBGeneric</span></tt></a> which provides this
class with methods that are not data source specific.</p>
<p>Design Part: 1.28</p>
<dl class="method">
<dt id="setlyze.database.AccessLocalDB.get_record_ids">
<tt class="descname">get_record_ids</tt><big>(</big><em>loc_ids</em>, <em>spe_ids</em><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#AccessLocalDB.get_record_ids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.AccessLocalDB.get_record_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of record IDs that match the localities IDs
in the list <cite>loc_ids</cite> and the species IDs in the list <cite>spe_ids</cite>.</p>
<p>Design Part: 1.41</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.AccessLocalDB.get_species">
<tt class="descname">get_species</tt><big>(</big><em>loc_slot=0</em><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#AccessLocalDB.get_species"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.AccessLocalDB.get_species" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of species tuples in the format <tt class="docutils literal"><span class="pre">(spe_id,</span>
<span class="pre">'spe_name_venacular',</span> <span class="pre">'spe_name_latin')</span></tt> from the local
database that match the localities selection.</p>
<p>The values for <cite>loc_slot</cite> are <tt class="docutils literal"><span class="pre">0</span></tt> for the first localities
selection and <tt class="docutils literal"><span class="pre">1</span></tt> for the second localities selection.</p>
<p>Design Part: 1.96</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.AccessLocalDB.get_spots">
<tt class="descname">get_spots</tt><big>(</big><em>rec_ids</em><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#AccessLocalDB.get_spots"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.AccessLocalDB.get_spots" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all 25 spot booleans for the records with IDs matching
the record IDs in the list <cite>rec_ids</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.AccessLocalDB.set_species_spots">
<tt class="descname">set_species_spots</tt><big>(</big><em>rec_ids</em>, <em>slot</em><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#AccessLocalDB.set_species_spots"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.AccessLocalDB.set_species_spots" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a table in the local database containing the spots
information for SETL records matching <cite>rec_ids</cite>. Two spots
tables can be created. The values for <cite>slot</cite> can be <tt class="docutils literal"><span class="pre">0</span></tt> for table
<tt class="docutils literal"><span class="pre">species_spots_1</span></tt> and <tt class="docutils literal"><span class="pre">1</span></tt> for <tt class="docutils literal"><span class="pre">species_spots_2</span></tt>.</p>
<p>Each record in the spots table consists of the plate ID followed
by the 25 spot booleans.</p>
<p>Design Part: 1.19.1</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="setlyze.database.AccessRemoteDB">
<em class="property">class </em><tt class="descclassname">setlyze.database.</tt><tt class="descname">AccessRemoteDB</tt><a class="reference internal" href="../_modules/setlyze/database.html#AccessRemoteDB"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.AccessRemoteDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide standard methods for accessing data in the remote
PostgreSQL SETL database. These methods are only used when the data
source is set to <tt class="docutils literal"><span class="pre">setl-database</span></tt>.</p>
<p>Inherits from <a class="reference internal" href="#setlyze.database.AccessDBGeneric" title="setlyze.database.AccessDBGeneric"><tt class="xref py py-class docutils literal"><span class="pre">AccessDBGeneric</span></tt></a> which provides this
class with methods that are not data source specific.</p>
<p>Design Part: 1.29</p>
</dd></dl>

<dl class="class">
<dt id="setlyze.database.MakeLocalDB">
<em class="property">class </em><tt class="descclassname">setlyze.database.</tt><tt class="descname">MakeLocalDB</tt><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a local SQLite database with default tables and fill some
tables based on the data source.</p>
<p>This class can load data from two data sources. One data source
is user supplied CSV files containing SETL data. The CSV files must
be exported by the MS Access SETL database.
The second source is the PostgreSQL SETL database. This function
requires a direct connection with the SETL database server.</p>
<p>Because the import of SETL data into the local database can take
a while, and instance of this class must run in a separate thread.
An instance of this class is therefor a thread object.</p>
<p>Once a thread object is created, its activity must be started by
calling the thread’s start() method. This invokes the run() method
in a separate thread of control.</p>
<p>Design Part: 1.2</p>
<dl class="method">
<dt id="setlyze.database.MakeLocalDB.create_new_db">
<tt class="descname">create_new_db</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.create_new_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.create_new_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new local database and then calls the methods
that create the necessary tables.</p>
<p>This deletes the current local database if present in the user&#8217;s
home folder.</p>
<p>Design Part: 1.38</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.create_table_info">
<tt class="descname">create_table_info</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.create_table_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.create_table_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a table for storing basic information about the
local database.</p>
<p>This information includes its creation date and the data source.
The data source is either the SETL database (MS Access/PostgreSQL)
or CSV files containing SETL data. A version number for the
database is also saved. This could be handy in the future,
for example we can notify the user if the local database is
too old, followed by creating a new local database.</p>
<p>Design Part: 1.75</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.create_table_localities">
<tt class="descname">create_table_localities</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.create_table_localities"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.create_table_localities" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a table for the SETL localities.</p>
<p>Because the data from this table is accessed frequently, the
localities records are automatically saved to this table when
an analyze is started.</p>
<p>Design Part: 1.76</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.create_table_plate_spot_totals">
<tt class="descname">create_table_plate_spot_totals</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.create_table_plate_spot_totals"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.create_table_plate_spot_totals" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a table for the total of spots per plate in the
distance tables.</p>
<p>Design Part: 1.85</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.create_table_plates">
<tt class="descname">create_table_plates</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.create_table_plates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.create_table_plates" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a table for the SETL plates.</p>
<p>This table is only filled if the user selected CSV files to
import SETL data from. If the remote SETL database is used,
the plate records are obtained directly via queries.</p>
<p>Design Part: 1.78</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.create_table_records">
<tt class="descname">create_table_records</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.create_table_records"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.create_table_records" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a table for the SETL records.</p>
<p>This table is only filled if the user selected CSV files to
import SETL data from. If the remote SETL database is used,
the records are obtained directly via queries.</p>
<p>Design Part: 1.79</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.create_table_species">
<tt class="descname">create_table_species</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.create_table_species"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.create_table_species" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a table for the SETL species.</p>
<p>Because the data from this table is accessed frequently, the
species records are automatically saved to this table when
an analyze is started.</p>
<p>Design Part: 1.77</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.create_table_species_spots_1">
<tt class="descname">create_table_species_spots_1</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.create_table_species_spots_1"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.create_table_species_spots_1" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a table that will contain the SETL records for the
first species selection.</p>
<p>Because the user can select multiple species, the plate IDs in
column <tt class="docutils literal"><span class="pre">rec_pla_id</span></tt> don&#8217;t have to be unique, so we&#8217;re
creating a separate column <tt class="docutils literal"><span class="pre">id</span></tt> as the primary key.</p>
<p>Design Part: 1.80</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.create_table_species_spots_2">
<tt class="descname">create_table_species_spots_2</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.create_table_species_spots_2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.create_table_species_spots_2" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a table that will contain the SETL records for the
second species selection.</p>
<p>Because the user can select multiple species, the plate IDs in
column <tt class="docutils literal"><span class="pre">rec_pla_id</span></tt> don&#8217;t have to be unique, so we&#8217;re
creating a separate column <tt class="docutils literal"><span class="pre">id</span></tt> as the primary key.</p>
<p>Design Part: 1.81</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.create_table_spot_distances_expected">
<tt class="descname">create_table_spot_distances_expected</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.create_table_spot_distances_expected"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.create_table_spot_distances_expected" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a table for the expected spot distances.</p>
<p>Design Part: 1.84</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.create_table_spot_distances_observed">
<tt class="descname">create_table_spot_distances_observed</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.create_table_spot_distances_observed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.create_table_spot_distances_observed" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a table for the observed spot distances.</p>
<p>Design Part: 1.83</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.insert_from_csv">
<tt class="descname">insert_from_csv</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.insert_from_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.insert_from_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new local database and load all SETL data from the
user selected CSV files into the local database.</p>
<dl class="docutils">
<dt>The SETL data is loaded from four separate CSV files:</dt>
<dd><ul class="first last simple">
<li>localities_file, containing the SETL locations.</li>
<li>species_file, containing the SETL species.</li>
<li>records_file, containing the SETL records.</li>
<li>plates_file, containing the SETL plates.</li>
</ul>
</dd>
</dl>
<p>These files must be exported from the MS Access SETL database
and contain all fields. The CSV file must be in Excel format,
which means delimited by semicolons (;) and double quotes (&#8221;) as
the quote character for fields with special characters.</p>
<p>Design Part: 1.32</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.insert_from_db">
<tt class="descname">insert_from_db</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.insert_from_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.insert_from_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new local database and load localities and species
data from the remote SETL database into the local database.</p>
<p>This method requires a direct connection with the SETL
database server.</p>
<p>The reason why we don&#8217;t load all SETL data into the local database
is because we can execute queries on the remote database. So
there&#8217;s no need to load large amounts of data onto the user&#8217;s
computer. Because the localities and species data is accessed
often, loading this into the local database increases speed of
the application.</p>
<p>Design Part: 1.33</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.insert_localities_from_csv">
<tt class="descname">insert_localities_from_csv</tt><big>(</big><em>delimiter=';'</em>, <em>quotechar='&quot;'</em><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.insert_localities_from_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.insert_localities_from_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert the SETL localities from a CSV file into the local
database.</p>
<p><cite>delimiter</cite> is a one-character string used to separate fields
in the CSV file. <cite>quotechar</cite> is a one-character string used to
quote fields containing special characters in the CSV file.
The default values for these two arguments are suited for CSV
files in Excel format.</p>
<p>For a description of the format for the localities file, refer
to <a class="reference internal" href="../design_parts_data.html#design-part-data-2-18"><em>2.18</em></a>.</p>
<p>Design Part: 1.34</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.insert_plates_from_csv">
<tt class="descname">insert_plates_from_csv</tt><big>(</big><em>delimiter=';'</em>, <em>quotechar='&quot;'</em><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.insert_plates_from_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.insert_plates_from_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert the plates from a CSV file into the local database.</p>
<p><cite>delimiter</cite> is a one-character string used to separate fields
in the CSV file. <cite>quotechar</cite> is a one-character string used to
quote fields containing special characters in the CSV file.
The default values for these two arguments are suited for CSV
files in Excel format.</p>
<p>For a description of the format for the localities file, refer
to <a class="reference internal" href="../design_parts_data.html#design-part-data-2-20"><em>2.20</em></a>.</p>
<p>Design Part: 1.36</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.insert_records_from_csv">
<tt class="descname">insert_records_from_csv</tt><big>(</big><em>delimiter=';'</em>, <em>quotechar='&quot;'</em><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.insert_records_from_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.insert_records_from_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert the records from a CSV file into the local database.</p>
<p><cite>delimiter</cite> is a one-character string used to separate fields
in the CSV file. <cite>quotechar</cite> is a one-character string used to
quote fields containing special characters in the CSV file.
The default values for these two arguments are suited for CSV
files in Excel format.</p>
<p>For a description of the format for the localities file, refer
to <a class="reference internal" href="../design_parts_data.html#design-part-data-2-21"><em>2.21</em></a>.</p>
<p>Design Part: 1.37</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.insert_species_from_csv">
<tt class="descname">insert_species_from_csv</tt><big>(</big><em>delimiter=';'</em>, <em>quotechar='&quot;'</em><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.insert_species_from_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.insert_species_from_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert the species from a CSV file into the local database.</p>
<p><cite>delimiter</cite> is a one-character string used to separate fields
in the CSV file. <cite>quotechar</cite> is a one-character string used to
quote fields containing special characters in the CSV file.
The default values for these two arguments are suited for CSV
files in Excel format.</p>
<p>For a description of the format for the localities file, refer
to <a class="reference internal" href="../design_parts_data.html#design-part-data-2-19"><em>2.19</em></a>.</p>
<p>Design Part: 1.35</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.remove_db_file">
<tt class="descname">remove_db_file</tt><big>(</big><em>tries=0</em><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.remove_db_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.remove_db_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the database file.</p>
<p>This method does 3 tries if for some reason the database file
could not be deleted (e.g. the file is in use by a different
process.</p>
</dd></dl>

<dl class="method">
<dt id="setlyze.database.MakeLocalDB.run">
<tt class="descname">run</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#MakeLocalDB.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.MakeLocalDB.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Decide based on the configuration variables which functions
should be called.</p>
<p>This method first checks if SETLyze is configured to create
a new local database. This is done by checking the value of
<tt class="docutils literal"><span class="pre">setlyze.config.cfg.get('make-new-db')</span></tt>. If this is set to
<tt class="xref docutils literal"><span class="pre">False</span></tt>, the method ends and the thread is destroyed. If set
to <tt class="xref docutils literal"><span class="pre">True</span></tt>, a new local database is created based on the data
source configuration.</p>
<p>The data source configuration is checked by calling
<tt class="docutils literal"><span class="pre">setlyze.config.cfg.get('data-source')</span></tt>. If this is set to
<tt class="docutils literal"><span class="pre">setl-database</span></tt>, the method <tt class="docutils literal"><span class="pre">insert_from_db</span></tt> is called and
some SETL data from the remote SETL database is loaded into the
local database. If set to <tt class="docutils literal"><span class="pre">csv-msaccess</span></tt>, the method
<tt class="docutils literal"><span class="pre">insert_from_csv</span></tt> is called which loads all SETL data from the
supplied CSV files into the local database.</p>
<p>Design Part: 1.31</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="setlyze.database.get_database_accessor">
<tt class="descclassname">setlyze.database.</tt><tt class="descname">get_database_accessor</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#get_database_accessor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.get_database_accessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an object that facilitates access to either the local or
the remote database.</p>
<p>Based on the data source configuration, obtained with
<tt class="docutils literal"><span class="pre">setlyze.config.cfg.get('data-source')</span></tt>, this function wil either
return an instance of AccessLocalDB or AccessRemoteDB. This instance
provides methods that are specific to the data source currently in
use.</p>
<p>Design Part: 1.93</p>
</dd></dl>

<dl class="function">
<dt id="setlyze.database.get_plates_total_matching_spots_total">
<tt class="descclassname">setlyze.database.</tt><tt class="descname">get_plates_total_matching_spots_total</tt><big>(</big><em>n_spots</em>, <em>slot=0</em><big>)</big><a class="reference internal" href="../_modules/setlyze/database.html#get_plates_total_matching_spots_total"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#setlyze.database.get_plates_total_matching_spots_total" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an integer representing the number of plates that
match the provided number of positive spots <cite>n_spots</cite>.</p>
<p>Possible values for <cite>slot</cite> are 0 for the first species selection,
and 1 for the second species selection.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/setl-logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">setlyze.database</span></tt> &#8212; Database access</a><ul>
<li><a class="reference internal" href="#module-setlyze.database">Module Contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="config.html"
                        title="previous chapter"><tt class="docutils literal docutils literal"><span class="pre">setlyze.config</span></tt> &#8212; Configuration manager</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="gui.html"
                        title="next chapter"><tt class="docutils literal"><span class="pre">setlyze.gui</span></tt> &#8212; Graphical interfaces</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/setlyze/database.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="gui.html" title="setlyze.gui — Graphical interfaces"
             >next</a> |</li>
        <li class="right" >
          <a href="config.html" title="setlyze.config — Configuration manager"
             >previous</a> |</li>
        <li><a href="../index.html">SETLyze v1.0 documentation</a> &raquo;</li>
          <li><a href="../developer_guide.html" >SETLyze Developer Guide</a> &raquo;</li>
          <li><a href="../setlyze_modules.html" >SETLyze Standard Modules</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, GiMaRIS.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.4.
    </div>
  </body>
</html>